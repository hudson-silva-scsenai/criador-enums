<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Enums Java</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            padding: 20px;
            max-width: 800px;
            margin: auto;
            background-color: #f4f4f4;
            color: #333;
        }
        h1 {
            color: #2c3e50;
        }
        h2 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
            color: #34495e;
        }
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px 0;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #2980b9;
        }
        #output-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <h1>Gerador de Enums Java</h1>
    <p>Insira seu conteúdo CSV na caixa de texto abaixo. A primeira coluna será usada para o nome do enum e as demais como argumentos do construtor.</p>

    <hr>

    <div class="input-section">
        <h2>Entrada CSV</h2>
        <textarea id="csvInput" rows="10" placeholder="Cole seu conteúdo CSV aqui..."></textarea>
    </div>

    <button onclick="generateEnum()">Gerar Enum</button>

    <hr>

    <div id="output-container">
        <h2>Saída Java Enum</h2>
        <textarea id="enumOutput" rows="10" readonly placeholder="O resultado aparecerá aqui..."></textarea>
    </div>

    <script>
        function generateEnum() {
            const csvInput = document.getElementById('csvInput').value;
            const lines = csvInput.trim().split('\n');
            const prepositions = [" de ", " do ", " da ", " dos ", " das ", " e ", " ou ", " para ", " ao ", " a ", " o ", " as ", " os"];
            const resultLines = [];
            const hasArgs = lines[0].includes(',');

            lines.forEach(line => {
                const parts = line.split(',');
                let enumName = parts[0];

                // Remove acentos
                enumName = enumName.normalize('NFD').replace(/[\u0300-\u036f]/g, "");

                // Converte para uppercase e substitui preposições e caracteres especiais
                let processedName = enumName.toLowerCase();
                prepositions.forEach(prep => {
                    // Usa regex para garantir que a preposição seja uma palavra completa
                    processedName = processedName.replace(new RegExp(prep, 'g'), '_');
                });
                
                // Remove caracteres especiais e espaços, substituindo por _
                processedName = processedName.replace(/[^a-zA-Z0-9_]/g, '_');
                
                // Remove múltiplos underscores e underscores no início/fim
                processedName = processedName.replace(/_+/g, '_').replace(/^_|_$/g, '');

                // Converte para uppercase
                processedName = processedName.toUpperCase();

                if (hasArgs) {
                    const args = parts.slice(1).map(arg => {
                        // Verifica se o argumento é um número. Se não, adiciona aspas.
                        if (!isNaN(arg) && !isNaN(parseFloat(arg))) {
                            return arg;
                        } else {
                            return `"${arg.trim()}"`;
                        }
                    }).join(', ');
                    resultLines.push(`${processedName}(${args})`);
                } else {
                    resultLines.push(processedName);
                }
            });

            const output = resultLines.join(',\n') + (resultLines.length > 0 ? ';' : '');
            document.getElementById('enumOutput').value = output;
        }
    </script>

</body>
</html>